# 抽奖应用产品需求文档 (PRD)

## 1. 产品概述

### 1.1 产品简介
抽奖应用是一个基于Web的抽奖平台，用户可以创建抽奖活动，参与者可以通过填写联系方式参与抽奖，系统会自动进行抽奖并公示结果。

### 1.2 产品目标
- 提供简单易用的抽奖活动创建和管理功能
- 确保抽奖过程的公平性和透明度
- 提供完整的抽奖历史记录查询功能
- 支持多种抽奖方式和奖品设置

### 1.3 技术栈
- 前端：Vue 3 + TypeScript + Element Plus
- 后端：FastAPI + SQLAlchemy + SQLite
- 部署：Docker + Docker Compose

## 2. 功能需求

### 2.1 核心功能

#### 2.1.1 创建抽奖事件
**功能描述**：用户可以创建抽奖活动，设置活动基本信息和抽奖规则。

**具体需求**：
- 活动基本信息：标题、描述、开始时间、结束时间
- 奖品设置：奖品名称、数量、等级
- 抽奖规则：抽奖方式（随机/按顺序）、每人参与次数限制
- 活动状态：未开始、进行中、已结束

**界面元素**：
- 活动标题输入框
- 活动描述文本框
- 开始/结束时间选择器
- 奖品添加/编辑/删除功能
- 抽奖规则设置选项
- 保存/发布按钮

#### 2.1.2 参与抽奖
**功能描述**：用户可以通过填写联系方式参与抽奖活动。

**具体需求**：
- 联系方式：姓名、电话、邮箱（可选）
- 参与验证：防止重复参与的机制
- 参与确认：成功参与后的提示信息
- 活动状态检查：只能参与进行中的活动

**界面元素**：
- 活动详情展示
- 联系方式表单
- 参与按钮
- 成功/失败提示

#### 2.1.3 抽奖执行
**功能描述**：活动创建者可以执行抽奖，系统自动选择中奖者。

**具体需求**：
- 抽奖触发：手动触发抽奖
- 中奖算法：基于随机算法的公平抽奖
- 结果生成：自动生成中奖名单
- 结果通知：记录中奖信息

**界面元素**：
- 抽奖按钮
- 抽奖进度显示
- 中奖结果展示

#### 2.1.4 抽奖结果查询与公示
**功能描述**：用户可以查看抽奖活动的历史记录和中奖结果。

**具体需求**：
- 活动列表：展示所有抽奖活动
- 活动详情：查看活动基本信息和中奖结果
- 中奖名单：展示中奖者的联系方式（脱敏处理）
- 历史记录：按时间顺序展示所有抽奖活动

**界面元素**：
- 活动列表页面
- 活动详情页面
- 中奖名单展示
- 搜索和筛选功能

### 2.2 辅助功能

#### 2.2.1 用户管理
- 简单的用户区分：活动创建者/参与者
- 无需复杂登录系统，使用简单标识

#### 2.2.2 数据导出
- 活动数据导出：支持导出活动信息和中奖名单
- 格式支持：CSV、Excel

## 3. 非功能性需求

### 3.1 性能需求
- 页面加载时间：不超过3秒
- 抽奖响应时间：不超过5秒
- 支持100人同时在线参与

### 3.2 安全需求
- 数据传输加密：使用HTTPS
- 防止重复参与：基于联系方式或IP限制
- 数据备份：定期备份数据库

### 3.3 可用性需求
- 界面友好：简洁直观的用户界面
- 操作简单：减少用户操作步骤
- 错误提示：清晰的错误信息和解决建议

## 4. 系统架构

### 4.1 前端架构
```
抽奖应用前端
├── src
│   ├── components     # 公共组件
│   ├── views         # 页面组件
│   ├── router        # 路由配置
│   ├── store         # 状态管理
│   ├── api           # API接口
│   └── utils         # 工具函数
├── public            # 静态资源
└── package.json      # 依赖配置
```

### 4.2 后端架构
```
抽奖应用后端
├── app
│   ├── api           # API路由
│   ├── core          # 核心配置
│   ├── models        # 数据模型
│   ├── schemas       # 数据模式
│   ├── services      # 业务逻辑
│   └── utils         # 工具函数
├── alembic           # 数据库迁移
├── tests             # 测试代码
└── requirements.txt  # 依赖配置
```

### 4.3 数据库设计
```
抽奖活动表 (raffles)
- id: 主键
- title: 活动标题
- description: 活动描述
- start_time: 开始时间
- end_time: 结束时间
- status: 活动状态
- created_at: 创建时间
- updated_at: 更新时间

奖品表 (prizes)
- id: 主键
- raffle_id: 抽奖活动ID
- name: 奖品名称
- quantity: 奖品数量
- level: 奖品等级
- created_at: 创建时间

参与者表 (participants)
- id: 主键
- raffle_id: 抽奖活动ID
- name: 参与者姓名
- phone: 电话号码
- email: 邮箱
- created_at: 参与时间

中奖记录表 (winners)
- id: 主键
- raffle_id: 抽奖活动ID
- prize_id: 奖品ID
- participant_id: 参与者ID
- created_at: 中奖时间
```

## 5. 开发计划

### 5.1 第一阶段：基础框架搭建
- 前后端项目初始化
- 基础UI框架搭建
- 数据库设计与实现

### 5.2 第二阶段：核心功能开发
- 创建抽奖活动功能
- 参与抽奖功能
- 抽奖执行功能

### 5.3 第三阶段：辅助功能开发
- 抽奖结果查询与公示
- 数据导出功能
- 用户界面优化

### 5.4 第四阶段：测试与部署
- 功能测试
- 性能测试
- 部署上线

## 6. 风险评估

### 6.1 技术风险
- 抽奖算法的公平性验证
- 高并发情况下的系统稳定性
- 数据安全与隐私保护

### 6.2 解决方案
- 使用成熟的随机算法库
- 实施负载测试和性能优化
- 加强数据加密和访问控制

## 7. 成功指标

### 7.1 功能指标
- 抽奖活动创建成功率：100%
- 抽奖执行成功率：99.9%
- 数据查询响应时间：<2秒

### 7.2 用户体验指标
- 用户操作成功率：95%
- 用户满意度：4.5/5
- 系统可用性：99.5%